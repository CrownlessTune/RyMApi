import{r as a,j as e,a as v}from"./index-D2HsFtFe.js";const S=()=>{const[c,x]=a.useState([]),[j,d]=a.useState([]),[g,m]=a.useState(!0),[h,f]=a.useState(null),[r,u]=a.useState({species:"",gender:"",status:""}),p=a.useRef(null);a.useEffect(()=>{const s=JSON.parse(localStorage.getItem("filters"));s&&u(s)},[]),a.useEffect(()=>{(async()=>{try{let t=[],n=1,l=!0;for(;l;){const i=await v.get(`https://rickandmortyapi.com/api/character?page=${n}`);t=[...t,...i.data.results],l=!!i.data.info.next,n++}x(t),d(t)}catch(t){f(t.message)}finally{m(!1)}})()},[]),a.useEffect(()=>{const{species:s,gender:t,status:n}=r,l=c.filter(i=>(!s||i.species.toLowerCase()===s.toLowerCase())&&(!t||i.gender.toLowerCase()===t.toLowerCase())&&(!n||i.status.toLowerCase()===n.toLowerCase()));d(l)},[r,c]);const o=s=>{const{name:t,value:n}=s.target,l={...r,[t]:n};u(l),localStorage.setItem("filters",JSON.stringify(l))};return a.useEffect(()=>{const s=()=>{const n=p.current;n.scrollTop+n.clientHeight>=n.scrollHeight-50&&console.log("Reached the end of the scroll")},t=p.current;return t&&t.addEventListener("scroll",s),()=>{t&&t.removeEventListener("scroll",s)}},[]),g?e.jsx("p",{children:"Loading..."}):h?e.jsxs("p",{children:["Error: ",h]}):e.jsxs("main",{className:"character-search-container",children:[e.jsx("header",{children:e.jsx("h1",{children:"Rick and Morty Characters"})}),e.jsxs("section",{className:"filters","aria-label":"Filter options",children:[e.jsxs("label",{children:["Species:",e.jsxs("select",{name:"species",onChange:o,value:r.species,children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"Human",children:"Human"}),e.jsx("option",{value:"Alien",children:"Alien"}),e.jsx("option",{value:"Humanoid",children:"Humanoid"}),e.jsx("option",{value:"Robot",children:"Robot"}),e.jsx("option",{value:"Animal",children:"Animal"}),e.jsx("option",{value:"Mythological Creature",children:"Mythological"})]})]}),e.jsxs("label",{children:["Gender:",e.jsxs("select",{name:"gender",onChange:o,value:r.gender,children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Genderless",children:"Genderless"}),e.jsx("option",{value:"unknown",children:"Unknown"})]})]}),e.jsxs("label",{children:["Status:",e.jsxs("select",{name:"status",onChange:o,value:r.status,children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"Alive",children:"Alive"}),e.jsx("option",{value:"Dead",children:"Dead"}),e.jsx("option",{value:"unknown",children:"Unknown"})]})]})]}),e.jsx("section",{className:"characters-grid","aria-label":"Character results",children:e.jsx("ul",{style:{listStyle:"none",margin:0,padding:0},children:j.map(s=>e.jsx("li",{className:"character-card",children:e.jsxs("article",{children:[e.jsx("h2",{children:s.name}),e.jsx("img",{src:s.image,alt:`Image of ${s.name}`,className:"character-image"}),e.jsxs("p",{children:["Species: ",s.species]}),e.jsxs("p",{children:["Gender: ",s.gender]}),e.jsxs("p",{children:["Status: ",s.status]}),e.jsxs("p",{children:["Origin: ",s.origin.name]})]})},s.id))})})]})};export{S as default};
